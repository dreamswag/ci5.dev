<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ci5.dev</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="icon" type="image/png" href="https://ci5.dev/static/dev.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="menu-bar">
        <div class="menu-left">
            <a href="https://github.com/dreamswag/ci5" target="_blank" class="logo-group">
                <span class="apple-logo">üÉè</span>
                <span class="bold">Ci5</span>
            </a>
            
            <div class="menu-item hide-mobile">
                <span class="menu-label">run</span>
                <div class="dropdown">
                    <a href="https://ci5.run" target="_blank">Native Interface</a>
                    <a href="https://github.com/dreamswag/ci5.run" target="_blank">GitHub Repo</a>
                </div>
            </div>

            <div class="menu-item hide-mobile">
                <span class="menu-label">host</span>
                <div class="dropdown">
                    <a href="https://ci5.host" target="_blank">Native Interface</a>
                    <a href="https://github.com/dreamswag/ci5.host" target="_blank">GitHub Repo</a>
                </div>
            </div>

            <div class="menu-item hide-mobile">
                <span class="menu-label">dev</span>
                <div class="dropdown">
                    <a href="https://ci5.dev" target="_blank">Native Interface</a>
                    <a href="https://github.com/dreamswag/ci5.dev" target="_blank">GitHub Repo</a>
                </div>
            </div>

            <div class="menu-item hide-mobile">
                <span class="menu-label">network</span>
                <div class="dropdown">
                    <a href="https://ci5.network" target="_blank">Native Interface</a>
                    <a href="https://github.com/dreamswag/ci5.network" target="_blank">GitHub Repo</a>
                </div>
            </div>
        </div>
        
        <div class="menu-right">
            <span class="static-msg">N0 R19H75 D353RV3D. üé™ <span class="version-tag">v7.4-RC-1</span></span>
            <button class="mobile-sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </div>

    <div class="window-frame">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="traffic-lights hide-mobile">
                    <div class="light red"></div>
                    <div class="light yellow"></div>
                    <div class="light green"></div>
                </div>
                <button class="sidebar-close hide-desktop" id="sidebarClose">√ó</button>
            </div>
            
            <input type="text" id="search-box" class="search-input" placeholder="üîç Search Corks...">
            
            <div class="nav-group">
                <div class="nav-header">‚≠ê Verified</div>
                <div class="nav-item active" onclick="switchView('official', this)">üÉè ci5-canon</div>
            </div>
            
            <div class="nav-group">
                <div class="nav-header">üß™ Cork Registry</div>
                <div class="nav-item" onclick="switchView('top', this)">üå† User Favourites</div>
                <div class="nav-item" onclick="switchView('community', this)">üõ∏ Recently Deployed</div>
            </div>

            <div class="nav-group nav-footer">
                <div class="nav-header">üß¨ Ci5-ASH-HELIX</div>
                
                <div id="auth-guest">
                    <div class="nav-item highlight-item" onclick="startDeviceAuth()">üîê Connect [via GitHub]</div>
                </div>

                <div id="auth-user" class="hidden">
                    <div class="nav-item user-item" onclick="logout()">
                        <img id="sidebar-avatar" src="" alt="">
                        <span id="sidebar-username">...</span>
                        <span class="logout-icon">‚èª</span>
                    </div>
                    <div class="nav-item" onclick="switchView('submit', this)">üì¶ Submit Cork<span class="badge">+</span></div>
                </div>
            </div>


        </div>

        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <div class="content-area">
            <div id="browser-view">
                <div class="hero-card" id="hero-card">
                    <div class="hero-content">
                        <div class="hero-tag">FEATURED CORK</div>
                        <div class="hero-title">Suricata IDS</div>
                        <div class="hero-desc">
                            <span class="hero-line">Enterprise-grade threat detection. Optimised for Pi 5 Leeway.</span>
                        </div>
                        <button class="hero-btn" onclick="openDetail('suricata', 'official')">VIEW DETAILS</button>
                    </div>
                </div>

                <div class="section-title">
                    <span id="section-header">üÉè ci5-canon-corks</span>
                    <span class="signer-tag" id="signer-display">AUTH: LOADING...</span>
                </div>
                <div class="app-list" id="main-grid">
                </div>
            </div>

            <div id="submission-view" class="hidden">
                <div class="section-title"><span>üìù Submit a Cork</span></div>
                <div class="submission-form">
                    <div class="form-header-group">
                        <p class="form-desc">Generate a valid registry entry. <strong>Ci5-ASH Identity Required.</strong></p>
                        <div class="user-badge" id="form-user-badge">
                            </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Cork Name (ID)</label>
                        <input type="text" id="sub-name" placeholder="e.g., minecraft-paper">
                    </div>
                    <div class="form-group">
                        <label>GitHub Repo URL</label>
                        <input type="text" id="sub-repo" placeholder="https://github.com/username/cork-name">
                    </div>
                    <div class="form-group">
                        <label>Description (Short)</label>
                        <input type="text" id="sub-desc" placeholder="What does it do?">
                    </div>
                    <div class="form-group">
                        <label>RAM Requirement</label>
                        <select id="sub-ram">
                            <option value="64MB">64MB (Tiny)</option>
                            <option value="128MB">128MB (Small)</option>
                            <option value="512MB">512MB (Medium)</option>
                            <option value="1GB">1GB (Large)</option>
                            <option value="2GB+">2GB+ (Heavy)</option>
                        </select>
                    </div>
                    <button class="hero-btn action-btn" onclick="generateSubmission()">GENERATE JSON & OPEN PR</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden" onclick="closeModal(event)">
        <div class="modal-window">
            <div class="modal-header">
                <div class="app-icon large" id="modal-icon">üì¶</div>
                <div class="modal-title-group">
                    <div class="modal-title-row">
                        <h2 id="modal-title">App Name</h2>
                        <span class="modal-submitter" id="modal-submitter">by unknown</span>
                    </div>
                    <span class="signer-tag" id="modal-tag">OFFICIAL</span>
                </div>
                <button class="close-btn" onclick="toggleModal(false)">√ó</button>
            </div>
            
            <div class="modal-body">
                <p id="modal-desc" class="desc-text">Description goes here...</p>
                
                <div class="stat-row">
                    <div class="stat-box">
                        <div class="stat-label">RAM USAGE</div>
                        <div class="stat-val" id="modal-ram">128MB</div>
                    </div>
                </div>

                <div class="telemetry-section">
                    <div class="section-header">COMMUNITY SIGNAL (Ci5-ASH VERIFIED)</div>
                    <div id="community-ram-box" class="stat-box large"></div>
                    <div class="vote-actions">
                        <div class="vote-inputs">
                            <select id="vote-ram" class="minimal-select">
                                <option value="64">64 MB</option>
                                <option value="128">128 MB</option>
                                <option value="256">256 MB</option>
                                <option value="512">512 MB</option>
                                <option value="1024">1 GB</option>
                                <option value="2048">2 GB+</option>
                            </select>
                            <select id="vote-status" class="minimal-select">
                                <option value="CORK">CORK (STABLE)</option>
                                <option value="DORK">DORK (BROKEN)</option>
                            </select>
                        </div>
                        <button id="telemetry-action-btn" class="vote-btn">LOADING...</button>
                    </div>
                </div>

                <div class="install-box">
                    <div class="install-label">INSTALL COMMAND</div>
                    <code id="modal-cmd" onclick="copyCmd(this)">ci5 install appname</code>
                </div>

                <div class="modal-actions">
                    <a href="#" id="modal-source" target="_blank" class="text-link">View Source Code ‚Üó</a>
                </div>
            </div>
        </div>
    </div>

    <div id="auth-overlay" class="modal-overlay hidden">
        <div class="modal-window auth-window">
            <div class="modal-header">
                <div class="app-icon large">üîê</div>
                <div class="modal-title-group">
                    <h2>Device Authentication</h2>
                    <span class="signer-tag" style="color:#aaa; border-color:#555;">GITHUB OAUTH</span>
                </div>
                <button class="close-btn" onclick="closeAuthModal()">√ó</button>
            </div>
            
            <div class="modal-body center-text">
                <div id="auth-loading">
                    <div class="spinner"></div>
                    <p class="desc-text" style="margin-top:15px;">Connecting to GitHub...</p>
                </div>

                <div id="auth-code-section" class="hidden">
                    <p class="desc-text">Enter this verification code at <br><a href="https://github.com/login/device" target="_blank" class="text-link">github.com/login/device</a></p>
                    
                    <div class="auth-code-display" id="user-code">XXXX-XXXX</div>
                    
                    <div class="auth-status">
                        <span class="spinner-small"></span> Waiting for authorization...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="dock-container hidden"></div>
    <script src="static/script.js"></script>
    <script>
        // Mobile sidebar toggle (Existing Logic Preserved)
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebarClose = document.getElementById('sidebarClose');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function openSidebar() {
            sidebar.classList.add('open');
            sidebarOverlay.classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closeSidebar() {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('visible');
            document.body.style.overflow = '';
        }

        sidebarToggle.addEventListener('click', openSidebar);
        sidebarClose.addEventListener('click', closeSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    closeSidebar();
                }
            });
        });

        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                closeSidebar();
            }
        });
    </script>
</body>
</html>